CREATE SCHEMA BDET

CREATE TABLE BDET.LIVRO(
ISBN		INT		NOT NULL,
ID_CATEGORIA 	INT 		NOT NULL,
EDITORA 	VARCHAR[15],
QTD_ESTOQUE	INT		DEFAULT 0,
QTD_MIN		INT		DEFAULT 0,
PRECO		INT		NOT NULL,
APAGADO		BOOLEAN,
PRIMARY KEY(ISBN));

CREATE TABLE BDET.AUTOR(
ISBN		INT,
ANOME		VARCHAR[15],
ASOBRNM		VARCHAR[15],
PRIMARY KEY(ANOME, ASOBRNM),
FOREIGN KEY(ISBN) REFERENCES LIVRO(ISBN)); 

CREATE TABLE BDET.RESENHA(
ISBN		INT,
ID_RES		INT,
RES_TEXTO	VARCHAR[140],
PRIMARY KEY(ID_RES),
FOREIGN KEY(ISBN) REFERENCES LIVRO(ISBN));

CREATE TABLE BDET.CLIENTE(
CUSERNAME	VARCHAR[15],
SENHA		INT,
NOME		VARCHAR[15],
SOBRENOME	VARCHAR[15],
ENDERECO	VARCHAR[140],
CIDADE		VARCHAR[15],
ID_ESTADO	CHAR[2],
CEP		INT[8],
CC_NUMERO	INT,
ID_BANDEIR	INT,
CC_DATAVAL	INT,
PRIMARY KEY(CUSERNAME)
);	

CREATE TABLE BDET.ADMIN(
AUSERNAME	VARCHAR[15],
SENHA		VARCHAR[15],
NOME		VARCHAR[15],
SOBRENOME	VARCHAR[15],
ENDERECO	VARCHAR[15],
CIDADE		VARCHAR[15],
ID_ESTADO	CHAR[2],
CEP		INT[7],
DT_CONTRAT	DATE,
PRIMARY KEY(AUSERNAME, DT_CONTRAT));

CREATE TABLE BDET.ADM_TEL(	 	 	 	 	 	 	 	 	 	 
AUSERNAME	VARCHAR[15],
DT_CONTRAT	VARCHAR[15],
TELEFONE	INT,
PRIMARY KEY(AUSERNAME, TELEFONE)
FOREIGN KEY(DT_CONTRAT) REFERENCES 
);


CREATE TABLE BDET.CARRINHO(
CUSERNM		VARCHAR[15],
ID_LISTA	INT,
PRIMARY KEY(CUSERNM, ID_LISTA)
);

CREATE TABLE BDET.TRANSACAO(
CUSERNM		VARCHAR[15],
DATA		DATE,
HORA		INT,
CATEGORIA	VARCHAR[15],
ID_LISTA	INT,
PRIMARY KEY(DATA, HORA),
FOREIGN KEY(CUSERNM) REFERENCES CARRINHO(CUSERNM)
);




CREATE BDET.PEDIDO(	 	 	 	 	 	 	 	 	 	 
CUSERNM	    VARCHAR[15],	
T_DATA	    DATE,
T_HORA	    INT,
NUMERO	    INT,
PED_QTD	    INT, 	 	 	 	 
FOREIGN KEY(CUSERNM) REFERENCES CARRINHO(CUSERNM),
FOREIGN KEY(T_DATA) REFERENCES BDET.TRANSACAO(DATA),
FOREIGN KEY(HORA) REFERENCES BDET.CARRINHO(HORA));



CREATE TABLE BDET.ADICIONA(	 	 	 	 	 	 	 	 	 	 
CUSERNM	
ISBN
CARR
QTD
);

CREATE TABLE BDET.ESTADO(	 	 	 	 	 	 	 	 	 	 
ID_ESTADO
SIGLA_EST
);
	 	 	 	 	 	 	 	 	 
CREATE TABLE BDET.BANDEIRA(	 	 	 	 	 	 	 	 	 	 
ID_BANDEIR
MARCA_CC
);
	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 	 
CREATE TABLE BDET.CATEGORIA(	 	 	 	 	 	 	 	 	 	 
ID_CATEGOR
NCATEGORIA	 	 	 	 	 	 	 	 	 
);

CREATE TABLE BDET.LISTA(		 	 	 	 	 	 
IDLISTA	 	 	 	 	 	 	 	 	 	 
);

CREATE TABLE BDET.CONTEM(	 	 	 	 	 	 	 	 	 	 
IDLISTA	
ISBN
QTD
);
	 	 	 	 	 	 	 	 
CREATE TABLE BDET.PEDIDO_CFM(	 	 	 	 	 	 	 	 	 	 
NUMEROP	
AUSERNAME	
DATA	
HORA
);